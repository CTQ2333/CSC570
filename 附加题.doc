Ping不通一个地址，并不一定表示这个IP不存在或者没有连接在网络上，因为对方主机可能做了限制，比如安装了防火墙，因此Ping不通并不表示不能使用FTP或者TELNET连接。

Ping程序实际就是发送一个ICMP回显请求报文（就是请求别人收到这个报文之后回显）给目的主机，并等待回显的ICMP应答。然后打印出回显的报文。

1、PING命令主要作用是测试2台设备网络层之间是否。
其工作原理：假设A路由器PING B路由器，A路由器会先发一个ICMP ECHO报文（TYPE=8，CODE=0），如果2台设备 之间路由是可达的，B收到后会回一个ICMP REPLY的报文（TYPE=0，CODE=0）。ping命令也可以显示经过的跳数，
这样也可以通过PING命令查看我经过了哪几跳，每一跳的IP地址，命令参数是-R。但不是所有的路由器均支持该
命令，并且IP首部中留给选项的空间有限，不能存放太多的路径，一般最多就只能存放9个IP地址。

2、TRACERT命令主要作用和PING -R的作用一样，是测试2台设备之间经过的跳数和每一跳的IP地址。其工作原 理分2种情况说明：

1）假设A是一台PC机，由A来TRACERT B，A首先会发送一个ICMP ECHO的报文（TYPE=8，CODE=0）， 并且该报 文的TTL=1，第一个路由器收到后会丢弃该报文不转发，并返回一个ICMP超时的报文（TYPE=11，CODE=0），然后
A会在发送一个ICMP ECHO的报文，这时TTL=2，下一个路由器收到后又回一个ICMP超时报文。当报文到达B后，B会
回给A一个ICMP端口不可达的报文（TYPE=3，CODE=3）。

2）假设A是一台路由器，由A来TRACERT B，A首先会发送一个UDP报文，并且UDP的端口号大于30000以保证这个
端口号在B上未被占用，该报文的TTL=1，第一个路由器收到后会丢弃该报文不转发，并返回一个ICMP超时的报文

（TYPE=11，CODE=0），然后A会在发送一个UDP的报文，这时TTL=2，下一个路由器收到后又回一个ICMP超时报文。
当报文到达B后，B会回给A一个ICMP端口不可达的报文（TYPE=3，CODE=3）


Tracert 命令用 IP 生存时间 (TTL) 字段和 ICMP 错误消息来确定从一个主机到网络上其他主机的路由。

首先，tracert送出一个TTL是1的IP 数据包到目的地，当路径上的第一个路由器收到这个数据包时，它将TTL减1。此时，TTL变为0，所以该路由器会将此数据包丢掉，并送回一个「ICMP time exceeded」消息（包括发IP包的源地址，IP包的所有内容及路由器的IP地址），tracert 收到这个消息后，便知道这个路由器存在于这个路径上，接着tracert 再送出另一个TTL是2 的数据包，发现第2 个路由器...... tracert 每次将送出的数据包的TTL 加1来发现另一个路由器，这个重复的动作一直持续到某个数据包 抵达目的地。当数据包到达目的地后，该主机则不会送回ICMP time exceeded消息，一旦到达目的地，由于tracert通过UDP数据包向不常见端口(30000以上)发送数据包，因此会收到「ICMP port unreachable」消息，故可判断到达目的地。

tracert 有一个固定的时间等待响应(ICMP TTL到期消息)。如果这个时间过了，它将打印出一系列的*号表明：在这个路径上，这个设备不能在给定的时间内发出ICMP TTL到期消息的响应。然后，Tracert给TTL记数器加1，继续进行。
